const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B14KVCbc.js","assets/index-pMClebwb.js","assets/index-DialhCj9.css","assets/textarea-Dpkojzz0.js","assets/connection-indicator-B7QqDw5z.js"])))=>i.map(i=>d[i]);
import{r as a,_ as d,u as N,j as e,B as w,w as x}from"./index-pMClebwb.js";const _=a.lazy(()=>d(()=>import("./index-B14KVCbc.js"),__vite__mapDeps([0,1,2])).then(s=>({default:s.motion.li}))),v=a.lazy(()=>d(()=>import("./textarea-Dpkojzz0.js"),__vite__mapDeps([3,1,2])).then(s=>({default:s.Textarea}))),y=a.lazy(()=>d(()=>import("./connection-indicator-B7QqDw5z.js"),__vite__mapDeps([4,1,2])).then(s=>({default:s.ConnectionIndicator}))),b={hidden:{opacity:0,scale:.8},visible:s=>({opacity:1,scale:1,transition:{delay:s*.1}})};function I(){const{allAnswers:s,connectedPlayers:m,game:n,uuid:i,currentText:f,rounds:c}=N(),[h,p]=a.useState(""),o=a.useRef(null),u=a.useMemo(()=>{var t;return!n||!i?null:((t=s.find(r=>r.playerId===i))==null?void 0:t.text)??null},[s,i,n]);function g(t){p(t.currentTarget.value),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{x.setAnswer(t.currentTarget.value)},1e3)}const l=c.find(t=>t.active)??null;return e.jsxs("div",{className:"flex flex-col w-full h-full gap-8 p-8",style:{background:"linear-gradient(22deg, rgba(78,69,224,1) 45%, rgba(167,29,189,1) 100%)"},children:[e.jsxs("div",{className:"flex flex-row items-center flex-nowrap justify-between",children:[e.jsx("p",{className:"font-bold text-xl",children:n==null?void 0:n.name}),e.jsxs("div",{className:"flex flex-row flex-nowrap gap-4 items-center",children:[e.jsx(w,{size:"sm",variant:"outline",onClick:()=>{n&&x.leaveGame(n.id)},children:"Spiel verlassen"}),e.jsx(y,{})]})]}),e.jsxs("div",{className:"flex flex-row justify-center items-start gap-4 max-h-full h-full pb-12",children:[e.jsx("ul",{className:"flex flex-col gap-2 max-h-full overflow-y-auto",children:c.sort((t,r)=>t.round<r.round?1:t.round>r.round?-1:0).map(t=>e.jsxs(_,{className:"bg-white/20 p-4 rounded-lg min-w-[400px] max-w-[800px]",variants:b,initial:"hidden",animate:"visible",children:[l!==null&&t.id===l.id&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-bold text-3xl",children:["Runde ",l.round]}),!l.started&&!l.ended&&e.jsx("p",{className:"text-secondary-foreground mt-2",children:"Der Moderator hat die Runde noch nicht gestartet"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-secondary-foreground text-sm",children:"Nico hat folgendes gesagt:"}),e.jsx("p",{className:"w-full text-xl",dangerouslySetInnerHTML:{__html:f.replace(/\n/g,"<br>")}})]})]}),l!==null&&t.id!==l.id&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-muted-foreground",children:["Runde ",t.round]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-secondary-foreground text-sm",children:"Nico hat folgendes gesagt:"}),e.jsx("p",{className:"w-full text-xl",dangerouslySetInnerHTML:{__html:t.question.replace(/\n/g,"<br>")}})]})]})]},t.round))}),e.jsx("div",{className:"bg-white rounded-lg p-4 min-w-[400px] max-w-[800px]",children:l!==null&&e.jsxs(e.Fragment,{children:[u!==null&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Deine Antwort:"}),e.jsx("p",{className:"rounded-lg border p-4",dangerouslySetInnerHTML:{__html:u.replace(/\n/g,"<br />")}})]}),l.started&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-black font-bold text-sm",children:"Antwort eingeben:"}),e.jsx(v,{value:h,rows:5,disabled:!(l!=null&&l.started),onChange:g,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",placeholder:"Deine Antwort",className:"text-black"})]}),l.ended&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-muted-foreground",children:"Die Runde ist vorbei."}),s.length>0&&e.jsx("ul",{className:"flex flex-col gap-4 pt-2 overflow-y-auto max-h-full h-full",children:s.map(t=>{var r;return e.jsxs("li",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"font-bold",children:(r=m.find(j=>j.id===t.playerId))==null?void 0:r.nickname}),t.revealedToPlayers&&e.jsx("p",{dangerouslySetInnerHTML:{__html:t.text.replace(/\n/g,"<br />")}})]},t.id)})})]})]})})]})]})}export{I as GamePlayerView};
